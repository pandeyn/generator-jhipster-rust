//! <%= baseName %> - Generated by JHipster
//!
<%_ if (devDatabaseTypeMongodb) { _%>
//! A Rust web application built with Axum and MongoDB.
<%_ } else { _%>
//! A Rust web application built with Axum and Diesel.
<%_ } _%>

pub mod config;
pub mod db;
pub mod dto;
pub mod errors;
pub mod handlers;
pub mod middleware;
pub mod models;
<%_ if (enableSwaggerCodegen) { _%>
pub mod openapi;
<%_ } _%>
<%_ if (authenticationTypeOauth2) { _%>
pub mod security;
<%_ } _%>
pub mod services;

#[cfg(test)]
pub mod test_utils;

use config::AppConfig;
<%_ if (authenticationTypeOauth2) { _%>
use config::OAuth2Config;
use security::OAuth2Validator;
<%_ } _%>
<%_ if (devDatabaseTypeMongodb) { _%>
use db::MongoPool;
<%_ } else { _%>
use db::connection::DbPool;
<%_ } _%>
<%_ if (enableEmail) { _%>
use services::EmailService;
use std::sync::Arc;
<%_ } _%>

/// Application state shared across all handlers
#[derive(Clone)]
pub struct AppState {
<%_ if (devDatabaseTypeMongodb) { _%>
    pub db: MongoPool,
<%_ } else { _%>
    pub pool: DbPool,
<%_ } _%>
    pub config: AppConfig,
<%_ if (authenticationTypeOauth2) { _%>
    pub oauth2_config: OAuth2Config,
    pub oauth2_validator: OAuth2Validator,
<%_ } _%>
<%_ if (enableEmail) { _%>
    /// Email service for sending activation and password reset emails
    /// None if email is disabled (MAIL_ENABLED=false)
    pub email_service: Option<Arc<EmailService>>,
<%_ } _%>
}
